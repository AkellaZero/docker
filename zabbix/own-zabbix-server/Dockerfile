FROM zabbix/zabbix-server-pgsql:alpine-latest

USER root

# üîπ –°–ª–æ–π —É—Å—Ç–∞–Ω–æ–≤–∫–∏ Python (–±—É–¥–µ—Ç –∫—ç—à–∏—Ä–æ–≤–∞—Ç—å—Å—è –æ—Ç–¥–µ–ª—å–Ω–æ)
RUN apk add --no-cache python3 py3-pip

# üîπ –°–ª–æ–π —É—Å—Ç–∞–Ω–æ–≤–∫–∏ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π (–∑–∞–≤–∏—Å–∏—Ç –æ—Ç Python)
RUN apk add --no-cache \
    gcc \
    musl-dev \
    libffi-dev \
    openssl-dev \
    build-base \
  && python3 -m pip install --no-cache-dir \
    requests \
    python-opcua \
    pycrc32 \
  && rm -rf /root/.cache /tmp/*

USER zabbix
